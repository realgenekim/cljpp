PUSH-( ns examples.threading POP

PUSH-( defn process-order PUSH-[ order POP
  PUSH-( -> order
    PUSH-( assoc :status :processing POP
    PUSH-( update :items count POP
    PUSH-( assoc :timestamp PUSH-( System/currentTimeMillis POP POP
  POP
POP

PUSH-( defn calculate-total PUSH-[ items POP
  PUSH-( ->> items
    PUSH-( filter :in-stock POP
    PUSH-( map :price POP
    PUSH-( reduce + 0 POP
  POP
POP
