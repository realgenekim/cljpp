PUSH-( ns examples.destructuring POP

PUSH-( defn process-user PUSH-[ PUSH-{ :keys PUSH-[ name age email POP :as user POP POP
  PUSH-{ :display-name name
     :adult? PUSH-( >= age 18 POP
     :contact email
     :raw user
  POP
POP

PUSH-( defn extract-coords PUSH-[ PUSH-[ x y & rest POP POP
  PUSH-{ :x x :y y :remaining rest POP
POP

PUSH-( defn handle-response PUSH-[ PUSH-{ PUSH-[ status body POP :response
                                        PUSH-[ error-msg POP :error
                                        :as full-data POP POP
  PUSH-( if error-msg
    PUSH-{ :ok? false :error error-msg POP
    PUSH-{ :ok? true :status status :data body POP
  POP
POP
