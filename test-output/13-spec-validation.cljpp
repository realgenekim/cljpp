PUSH-( ns examples.specs
  PUSH-( :require PUSH-[ clojure.spec.alpha :as s POP POP
POP

PUSH-( s/def ::id pos-int? POP

PUSH-( s/def ::name
  PUSH-( s/and string? PUSH-( fn PUSH-[ x POP PUSH-( > PUSH-( count x POP 0 POP POP POP
POP

PUSH-( s/def ::age
  PUSH-( s/and int? PUSH-( fn PUSH-[ x POP PUSH-( <= 0 x 150 POP POP POP
POP

PUSH-( s/def ::user
  PUSH-( s/keys :req PUSH-[ ::id ::name POP
            :opt PUSH-[ ::age POP
  POP
POP

PUSH-( defn validate-user PUSH-[ user POP
  PUSH-( if PUSH-( s/valid? ::user user POP
    PUSH-{ :ok? true :user user POP
    PUSH-{ :ok? false :errors PUSH-( s/explain-data ::user user POP POP
  POP
POP

PUSH-( s/fdef process-user
  :args PUSH-( s/cat :user ::user POP
  :ret ::user
POP

PUSH-( defn process-user PUSH-[ user POP
  PUSH-( update user ::name clojure.string/upper-case POP
POP
