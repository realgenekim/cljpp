PUSH-( ns examples.program20 POP-ALL

PUSH-( defn form-field PUSH-[ PUSH-{ :keys PUSH-[ id label type value on-change error POP POP POP
  PUSH-[ :div.form-field
    PUSH-[ :label PUSH-{ :for id POP label POP
    PUSH-[ :input PUSH-{ :id id :type type :value value :on-change on-change :class PUSH-( if error "error" "" POP POP POP
    PUSH-[ :span.error PUSH-( or error "" POP POP
  POP
POP-ALL

PUSH-( defn registration-form PUSH-[ POP
  PUSH-( let PUSH-[
    errors PUSH-{ :email "Invalid email" :password nil :confirm nil POP
    loading false
    submitted false
  POP
    PUSH-[ :div.registration-form
      PUSH-[ :h2 "Register" POP
      PUSH-( form-field PUSH-{ :id "email" :label "Email" :type "text" :value "" :on-change PUSH-( fn PUSH-[ e POP nil POP :error PUSH-( :email errors POP POP POP
      PUSH-( form-field PUSH-{ :id "password" :label "Password" :type "password" :value "" :on-change PUSH-( fn PUSH-[ e POP nil POP :error PUSH-( :password errors POP POP POP
      PUSH-( form-field PUSH-{ :id "confirm" :label "Confirm Password" :type "password" :value "" :on-change PUSH-( fn PUSH-[ e POP nil POP :error PUSH-( :confirm errors POP POP POP
      PUSH-[ :div.actions
        PUSH-[ :button PUSH-{ :disabled loading POP "Submit" POP
        PUSH-( when submitted
          PUSH-[ :div.success "Registration successful!" POP
        POP
      POP
    POP
  POP
POP-ALL